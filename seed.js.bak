const mongoose = require("mongoose");
const dotenv = require("dotenv");
const EnergyUsage = require("./model");

dotenv.config();

mongoose.connect(process.env.MONGO_URI, {
    useNewUrlParser: true,
    useUnifiedTopology: true
}).then(() => console.log("MongoDB Connected"));

const sampleData = [
    { name: "eli", energy_usage: 120, threshold_limit: 100, alert_status: "Triggered" },
    { name: "cj", energy_usage: 80, threshold_limit: 100, alert_status: "Normal" },
    { name: "chris", energy_usage: 150, threshold_limit: 130, alert_status: "Triggered" },
    { name: "france", energy_usage: 75, threshold_limit: 100, alert_status: "Normal" },
    { name: "angel", energy_usage: 200, threshold_limit: 180, alert_status: "Triggered" }
];

const seedDatabase = async () => {
    await EnergyUsage.deleteMany({});
    await EnergyUsage.insertMany(sampleData);
    console.log("Database Seeded!");
    mongoose.connection.close();
};

seedDatabase();
